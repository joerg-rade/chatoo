@startuml

title Model Context Protocol (MCP) Overview with Responsibilities

component Client
component "[LLM]\n(Language Model)" as LLM
component "MCP Server" {
    component Agent
    component "Host\n(Plugins / APIs)" as Host
}
component Tooling

Client -d-> Agent : Prompt \n/ Request
Agent -l-> LLM : Enriched Input
Agent --> Host : JSON/RPC\ncalls
Host --> Agent : HTTP/SSE\nstream/events
Host -l-> Tooling : Triggers or\n Invokes Tools
Tooling -r-> Host : Tool Results
Agent -u-> Client : Final Response

note right of Agent
The Agent acts as the orchestrator between components:
* Receives and preprocesses requests from Client
* Injects user/session/context metadata
* Mediates and formats input to LLM
* Manages conversation state and sessions
* Routes tool invocations via Host
* Aggregates and returns responses
* Enforces safety, policy, and access control
end note

note right of Host
The Host facilitates external capabilities:
* Exposes plugins and tool APIs to the Agent
* Manages execution lifecycles of tools
* Streams data/results using HTTP or SSE
* Acts as a secure boundary between Agent and tools
* Supports scaling and routing to external services
end note

@enduml
